<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<script src="js/mui.min.js"></script>
		<link href="css/mui.min.css" rel="stylesheet" />
	</head>

	<body>
		<header class="mui-bar mui-bar-nav ">
			<a class="mui-action-back mui-icon mui-icon-arrowleft mui-pull-left"></a>
			<h1 class="mui-title">标题</h1>
			<a id="right_menu" class="mui-icon mui-action-menu mui-icon-bars mui-pull-right"></a>
		</header>
		
		
		<nav class="mui-bar mui-bar-tab" >
			<a class="mui-tab-item" href="#delete">
				<span class="mui-icon mui-icon-weixin" />
				<p>微信</p>
			</a>
			<a class="mui-tab-item" href="#">
				<span class="mui-icon mui-icon-personadd" />
				<p>微信</p>
			</a>
			<a class="mui-tab-item" href="#">
				<span class="mui-icon mui-icon-navigate" />
				<p>微信</p>
			</a>
			<a class="mui-tab-item" href="#forward">
				<span class="mui-icon mui-icon-person" />
				<p>我的</p>
			</a>
		</nav>
		<div id="pulltorefresh" class="mui-content mui-scroll-wrapper">
			<div class="mui-scroll">
				<ul class="mui-table-view">
					<li class="mui-table-view-cell">
						<div class="mui-card">
							<div class="mui-card-header mui-card-media" style="height:40vw;background-image: url(imgs/cbd.jpg);"></div>
							<div class="mui-card-content">
								<div class="mui-card-content mui-card-content-inner">
									<p style="color: gray;">ZKT 发表于 2018.7.30</p>
									<p>这是七月的倒数第二天，我在家里办公，由于打篮球受伤了现在膝盖还没有痊愈，我很沮丧！</p>
								</div>
							</div>
							<div class="mui-card-footer">
								<a class="mui-card-link">Like</a>
								<a class="mui-card-link">Read more</a>
							</div>
						</div>
					</li>

					<li class="mui-table-view-cell mui-media">
						<a href="javascript:;">
							<img class="mui-media-object mui-pull-left" src="imgs/muwu.jpg" />
							<div class="mui-media-body">
								<div>
									安卓开发讨论群
									<label class="mui-pull-right" style="color: grey;font-size: 13px">
										下午1:39
									</label>
								</div>
								<div>
									<label style="color: grey;font-size: 13px;">
										柴丽君：快两年了
									</label>
									<span class="mui-icon mui-icon-micoff mui-pull-right" style="color: gray;" />
								</div>
							</div>
						</a>
					</li>
				</ul>

			</div>
		</div>

		<div id="delete" class="mui-popover mui-popover-action mui-popover-bottom">
			<ul class="mui-table-view">
				<li class="mui-table-view-cell">
					<a href="#">菜单1</a>
				</li>
				<li class="mui-table-view-cell">
					<a href="#">toast</a>
				</li>
				<li class="mui-table-view-cell">
					<a class="#">菜单3</a>
				</li>
			</ul>
			<ul class="mui-table-view">
				<li class="mui-table-view-cell">
					<a href="#">菜单4</a>
				</li>
			</ul>

		</div>
		<script type="text/javascript" charset="utf-8">
			mui.init({
				pullRefresh: {
					container: '#pulltorefresh',
					down: {
						style: 'circle',
						callback: pulldownRefresh
					},
					up: {
						auto: true,
						contentrefresh: '正在加载...',
						callback: pullupRefresh
					}
				}
			});

			function pulldownRefresh() {
				setTimeout(function() {
					addData(true);
					mui('#pulltorefresh').pullRefresh().endPulldownToRefresh();
					mui.toast("为您推荐了5篇新文章！");
				}, 1500);
			}
			var count = 0;

			function pullupRefresh() {
				setTimeout(function() {
					addData(false);
					mui('#pulltorefresh').pullRefresh().endPullupToRefresh(++count > 3);
				}, 1500);
			}

			function addData(s) {
				var table = document.body.querySelector('.mui-table-view');
				var cell = document.body.querySelector('.mui-table-view-cell');
				for(var i = 0; i < 5; i++) {
					var li = document.createElement('li');
					li.setAttribute("id", Math.floor(Math.random() * 100));
					if(s) {
						li.className = 'mui-table-view-cell';
						li.innerHTML = '<div class="mui-card"><div class="mui-card-header mui-card-media" style="height:40vw;background-image: url(imgs/cbd.jpg);"></div><div class="mui-card-content"><div class="mui-card-content mui-card-content-inner"><p style="color: gray;">ZKT 发表于 2018.7.30</p><p>这是七月的倒数第二天，我在家里办公，由于打篮球受伤了现在膝盖还没有痊愈，我很沮丧！</p></div></div><div class="mui-card-footer"><a class="mui-card-link">Like</a><a class="mui-card-link">Read more</a></div></div>';
						table.insertBefore(li, table.firstChild);
					} else {
						li.className = "mui-table-view-cell mui-media";
						li.innerHTML = '<div style="margin-right: 10px;"><a href="javascript:;"><img class="mui-media-object mui-pull-left" src="imgs/muwu.jpg" /><div class="mui-media-body"><div>安卓开发讨论群<label class="mui-pull-right" style="color: grey;font-size: 13px">下午1:39</label></div><div><label style="color: grey;font-size: 13px;">柴丽君：快两年了</label><span class="mui-icon mui-icon-micoff mui-pull-right" style="color: gray;" /></div></div></a></div>';
						table.appendChild(li);
					}
				}
			}

			mui('.mui-table-view').on('tap', '.mui-table-view-cell', function() {
				var a = this,
					parent;
				for(parent = a.parentNode; parent != document.body; parent = parent.parentNode) {
					if(parent.classList.contains('mui-popover-action')) {
						//关闭点击的弹框
						mui('#' + parent.id).popover('toggle');
						break;
					}
				}
				mui.toast("你点击的Item的Id为" + this.getAttribute("id") + this.innerText);
			});
			document.getElementById('right_menu').addEventListener('tap', function() {
				mui.confirm("请选择是否支付？", "购买", ['是', '否'], function(e) {
					if(e.index == 0) {
						mui.toast("购买成功");
					}
				})
			})
		</script>
	</body>

</html>